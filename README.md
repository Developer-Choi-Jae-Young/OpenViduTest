# Openvidu
- Openvidu학습을 위한 샘플코드 레포지토리

## 학습목표
- WebRTC Kurento 서버 기반 플랫폼 Openvidu 사용법에대해 학습한다.

## Openvidu란?
- Openvidu는 웹과 모바일 환경에서 영상 통화 기능을 쉽게 추가할 수 있도록 하는 오픈소스 플랫폼이다. 애플리케이션에 매우 간편하게 적용할 수 있는 다양한 데모 코드와 기술 스택을 제공하고 있다. WebRTC 미디어 서버를 구현하는 데 소모되는 리소스를 절약해서 빠르게 실시간 통신을 추가할 수 있도록 도와주는 것이 큰 장점이다.
영상 스트리밍 뿐만 아니라 화면 공유, 메시지 브로드캐스팅과 같이 화상 회의 애플리케이션에서 필요한 대부분의 기능들을 소스코드로 제공해주고 있다.

## Openvidu 구조
[출처 : https://sunsunny.tistory.com/90]
![캡처](/그림2.png)  
1. 어플리케이션 서버에서 세션을 초기화한다.
2. 어플리케이션 서버에서 세션에 커넥션을 생성한다. 세션에 들어올 참가자 수만큼 커넥션을 생성해야 한다. 각 커넥션은 세션에 단일 엑세스를 제공하는 토큰을 가지고 있다. 
3. 세션에 연결할 수 있는 토큰을 클라이언트에 전달한다.
4. openvidu-browser.js를 사용해 각 클라이언트는 세션에 연결하기 위해 토큰을 사용한다. 성공적으로 연결되면, 세션의 참가자가 된다.
5. 세션에 연결되면, 참가자는 openvidu-browser.js를 통해 스트림을 게시할 수 있다. 세션이 있는 다른 모든 참가자들은 게시한 스트림을 구독할 수 있다.

## Openvidu 기본개념
- Session  
세션은 참가자들이 연결해 오디오와 비디오 스트림을 주고 받을 수 있는 가상의 공간이다. 같은 세션에 연결된 참가자들만 서로를 보고 들을 수 있다. 각 세션마다 참가 가능한 인원을 다양하다. 1:1이나 대규모 화상 회의를 위한 수십명도 가능하다.

- Connection  
커넥션은 각 세션에 있는 참가자 한 명을 나타낸다. 세션에 연결하려면 어플리케이션 서버에서 초기화해야 되며 해당 토큰을 어플리케이션 클라이언트에 전달해야 한다. 이 방식을 통해 세션에 보안을 제공하며, 그래서 인증되지 않은 유저는 세션에 연결할 수 없다.
그렇기 때문에 커넥션은 클라이언트가 세션에 연결하는 구멍으로 볼 수도 있다. 클라이언트가 커넥션을 점유하면 세션의 참가자로 간주된다.

- Token  
참가자에게 세션에 대한 접근 권한을 주기 위해 필요하다. 각 참가자는 세션에 연결할 때 토큰을 사용한다. 토큰은 항상 커넥션과 관련이 있다. 어플리케이션 클라이언트에 전달할 토큰을 얻으려면 어플리케이션 서버에 커넥션을 생성해야 한다. 사실, 토큰은 해당 커넥션의 구멍을 점유할 수 있게 하는 키로 볼 수 있는 커넥션의 프로퍼티이다. 어플리케이션 클라이언트에서 사용될 때, 토큰은 세션 내부의 참가자에게 메타 데이터와 특정 기능을 제공할 수 있다.

- Stream  
스트림은 세션으로 흐르는 미디어 스트림이다. 참가자는 스트림을 게시할 수 있고 같은 세션에 있는 다른 참가자들은 그 스트림을 구독할 수 있다. 세션에서 스트림을 게시하는 방법, 시기 ,사람, 유형은 제한이 없다. 이는 어플리케이션과 사용법에 따라 완전히 달라집니다.

## 브렌치 설명
- back
    * Spring Boot기반 Openvidu 서버 코드 및 Docker로 인한 미디어 서버 개발환경 구성
- front
    * React기반 웹 프론트 코드